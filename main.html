<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Survival Game</title>

<style>
body {
    margin: 0;
    background: #111;
    font-family: Arial, sans-serif;
    color: white;
    text-align: center;
}

button {
    padding: 10px 20px;
    margin: 10px;
    font-size: 16px;
    cursor: pointer;
}

#game {
    position: relative;
    width: 800px;
    height: 500px;
    background: #1f4d1f;
    margin: 20px auto;
    border: 3px solid white;
    display: none;
}

.player, .food, .enemy {
    position: absolute;
    width: 25px;
    height: 25px;
}

.player { background: cyan; }
.food { background: red; border-radius: 50%; }
.enemy { background: purple; }

#stats { display: none; }

.screen { margin-top: 50px; }
</style>
</head>

<body>

<!-- RULES SCREEN -->
<div id="rulesScreen" class="screen">
    <h1>Survival Game</h1>
    <p><b>How to Play:</b></p>
    <p>Move with Arrow Keys or WASD.</p>
    <p>Collect red food to gain health and score.</p>
    <p>Avoid purple enemies â€” they damage you.</p>
    <p>Your health slowly drains over time.</p>
    <p><b>How to Win:</b> Reach the target score before your health reaches 0.</p>
    <button onclick="showLevels()">Start</button>
</div>

<!-- LEVEL SELECT -->
<div id="levelScreen" class="screen" style="display:none;">
    <h2>Select Difficulty</h2>
    <button onclick="startGame('beginner')">Beginner</button>
    <button onclick="startGame('intermediate')">Intermediate</button>
    <button onclick="startGame('advanced')">Advanced</button>
</div>

<div id="stats">
Health: <span id="health">100</span> |
Score: <span id="score">0</span> |
Goal: <span id="goal"></span>
</div>

<div id="game">
    <div class="player" id="player"></div>
</div>

<script>
let health, score, goalScore;
let healthDrain, enemyDamage, enemySpawnRate;
let gameOver = false;
let keys = {};

const game = document.getElementById("game");
const player = document.getElementById("player");
const healthDisplay = document.getElementById("health");
const scoreDisplay = document.getElementById("score");
const goalDisplay = document.getElementById("goal");

let playerPos = { x: 375, y: 225 };

function showLevels() {
    document.getElementById("rulesScreen").style.display = "none";
    document.getElementById("levelScreen").style.display = "block";
}

function startGame(level) {
    document.getElementById("levelScreen").style.display = "none";
    document.getElementById("stats").style.display = "block";
    game.style.display = "block";

    health = 100;
    score = 0;
    gameOver = false;

    if (level === "beginner") {
        healthDrain = 0.03;
        enemyDamage = 0.3;
        enemySpawnRate = 5000;
        goalScore = 100;
    }
    if (level === "intermediate") {
        healthDrain = 0.05;
        enemyDamage = 0.6;
        enemySpawnRate = 3500;
        goalScore = 200;
    }
    if (level === "advanced") {
        healthDrain = 0.08;
        enemyDamage = 1;
        enemySpawnRate = 1000;
        goalScore = 300;
    }

    goalDisplay.textContent = goalScore;

    playerPos = { x: 375, y: 225 };
    player.style.left = playerPos.x + "px";
    player.style.top = playerPos.y + "px";

    setInterval(spawnFood, 2000);
    setInterval(spawnEnemy, enemySpawnRate);

    update();
}

document.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
document.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

function spawnFood() {
    if (gameOver) return;
    const food = document.createElement("div");
    food.className = "food";
    food.style.left = Math.random() * 775 + "px";
    food.style.top = Math.random() * 475 + "px";
    game.appendChild(food);
}

function spawnEnemy() {
    if (gameOver) return;
    const enemy = document.createElement("div");
    enemy.className = "enemy";
    enemy.style.left = Math.random() * 775 + "px";
    enemy.style.top = Math.random() * 475 + "px";
    game.appendChild(enemy);
}

function checkCollision(a, b) {
    return !(
        a.x > b.x + 25 ||
        a.x + 25 < b.x ||
        a.y > b.y + 25 ||
        a.y + 25 < b.y
    );
}

function update() {
    if (gameOver) return;

    if (keys["arrowup"] || keys["w"]) playerPos.y -= 3;
    if (keys["arrowdown"] || keys["s"]) playerPos.y += 3;
    if (keys["arrowleft"] || keys["a"]) playerPos.x -= 3;
    if (keys["arrowright"] || keys["d"]) playerPos.x += 3;

    playerPos.x = Math.max(0, Math.min(775, playerPos.x));
    playerPos.y = Math.max(0, Math.min(475, playerPos.y));

    player.style.left = playerPos.x + "px";
    player.style.top = playerPos.y + "px";

    health -= healthDrain;
    healthDisplay.textContent = Math.floor(health);

    if (health <= 0) {
        gameOver = true;
        alert("Game Over!");
        location.reload();
    }

    if (score >= goalScore) {
        gameOver = true;
        alert("You Survived! You Win!");
        location.reload();
    }

    document.querySelectorAll(".food").forEach(food => {
        const pos = { x: parseInt(food.style.left), y: parseInt(food.style.top) };
        if (checkCollision(playerPos, pos)) {
            food.remove();
            health = Math.min(100, health + 15);
            score += 10;
            scoreDisplay.textContent = score;
        }
    });

    document.querySelectorAll(".enemy").forEach(enemy => {
        const pos = { x: parseInt(enemy.style.left), y: parseInt(enemy.style.top) };
        if (checkCollision(playerPos, pos)) {
            health -= enemyDamage;
        }
    });

    requestAnimationFrame(update);
}
</script>

</body>
</html>
